# Проєкт керування роботом на базі ROS 2

## Загальна характеристика проєкту

Даний проєкт реалізує програмно-апаратний комплекс керування мобільною роботизованою платформою з використанням фреймворку ROS 2. Система забезпечує взаємодію між обчислювальним модулем Raspberry Pi, драйверами двигунів постійного струму, камерою та програмними вузлами керування.

Основною метою проєкту є створення стабільного середовища для управління рухом робота, отримання відеопотоку з камери, а також організація взаємодії між компонентами через стандартизовані ROS 2-топіки та механізми QoS.

---

## Програмне та апаратне забезпечення

Для коректної роботи системи необхідно забезпечити наявність наступного програмного та апаратного середовища.

Апаратна частина включає:

* Raspberry Pi  5
* драйвер двигунів типу L298N 
* два двигуни постійного струму
* камера, сумісна з Linux та ROS 2
* блок живлення 

Програмна частина включає:

* операційну систему Ubuntu Server 24.04 LTS,
* встановлену версію ROS 2 (Jazzy),
* середовище розробки colcon,
* Python 3,
* бібліотеки rclpy, OpenCV, cv_bridge.

---

## Структура проєкту

Проєкт реалізовано у вигляді ROS 2 workspace та має наступну загальну структуру:

---

Основний функціонал зосереджений у двох програмних вузлах: motor_node та camera_node. Для одночасного запуску використовується launch-файл.

---

## Опис вузла motor_node

Вузол motor_node відповідає за керування рухом мобільної платформи.

Основними функціями вузла є:

* підписка на топік `/cmd_vel`,
* обробка лінійної та кутової швидкості,
* генерація PWM-сигналів,
* керування напрямком обертання двигунів,
* реалізація розвороту на місці.

Вузол приймає повідомлення типу `geometry_msgs/Twist` та інтерпретує їх наступним чином:

* `linear.x` — швидкість руху вперед або назад,
* `angular.z` — швидкість обертання навколо осі.

Для забезпечення стабільності зв’язку використовується налаштований профіль QoS з параметрами надійної доставки та обмеженої глибини черги.

Керування двигунами здійснюється через GPIO з використанням PWM.

---

## Опис вузла camera_node

Вузол camera_node призначений для захоплення, обробки та трансляції відеопотоку з камери.

Основними функціями вузла є:

* ініціалізація камери,
* зчитування відеокадрів,
* конвертація у формат ROS,
* публікація в топік `/image_raw`,
* оптимізація QoS для потокових даних.

Очищення буфера дозволяє уникнути накопичення застарілих кадрів та зменшує затримку передачі зображення.

---

## Опис launch-файлу

Launch-файл `robot_launch.py` забезпечує централізований запуск усіх компонентів системи.

Під час запуску відбувається:

* ініціалізація вузла motor_node,
* ініціалізація вузла camera_node,
* встановлення параметрів QoS,
* синхронізація запуску компонентів.

Використання launch-файлу дозволяє мінімізувати ручну конфігурацію та забезпечує відтворюваність експериментів.

---

## Компіляція проєкту

Після клонування репозиторію та розміщення пакету у директорії `src` необхідно виконати збірку workspace.

Перехід у кореневу директорію:

cd ~/ros2_ws

Збірка проєкту:

colcon build

Після успішної компіляції необхідно підключити середовище:

source install/setup.bash

---

## Запуск системи

### Ініціалізація середовища

Перед кожним запуском необхідно активувати ROS 2 workspace:

source ~/ros2_ws/install/setup.bash

### Запуск через launch-файл

ros2 launch robot_control robot_launch.py

У цьому режимі автоматично активуються всі основні вузли.

### Окремий запуск вузлів

За потреби кожен вузол може запускатися окремо.

Запуск керування двигунами:

ros2 run robot_control motor_node.py

Запуск камери:

ros2 run robot_control camera_node.py

---

## Керування рухом робота

Для керування рухом використовується стандартний топік `/cmd_vel`.

Приклад команди руху вперед:

ros2 topic pub /cmd_vel geometry_msgs/Twist "{linear: {x: 0.2}, angular: {z: 0.0}}"

Приклад повороту:

ros2 topic pub /cmd_vel geometry_msgs/Twist "{linear: {x: 0.0}, angular: {z: 0.5}}"

Приклад розвороту на місці:

ros2 topic pub /cmd_vel geometry_msgs/Twist "{linear: {x: 0.0}, angular: {z: 1.0}}"

Зупинка руху:

ros2 topic pub /cmd_vel geometry_msgs/Twist "{linear: {x: 0.0}, angular: {z: 0.0}}"

Для аварійної зупинки використовувати комбінацію `Ctrl + C`.

---

## Перегляд відеопотоку

Для перегляду зображення з камери використовується інструмент ros_stream:

http://192.168.*.*(ip RPi)

---
## Діагностика та налагодження

Для перевірки стану системи рекомендується використовувати стандартні інструменти ROS 2.

Перегляд активних вузлів:

ros2 node list

Перегляд топіків:

ros2 topic list

Перевірка повідомлень:

ros2 topic echo /cmd_vel
ros2 topic echo /image_raw

Перегляд параметрів:

ros2 param list

---

## Висновки

Розроблений програмний комплекс забезпечує повноцінне керування мобільною роботизованою платформою на базі ROS 2. Реалізовано інтеграцію модулів руху та зору, механізми компенсації механічних похибок, оптимізовану передачу даних та централізований запуск.


Якщо потрібно, я можу додатково адаптувати цей README під конкретний репозиторій або під вимоги викладача.
